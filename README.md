## Factorization paper simulations

This repository contains the simulation and analysis code used in the factorization manuscript.  
The code implements a full compilation flow from logical circuits down to physical-level fault-tolerant circuits, runs Monte-Carlo simulations, and produces the figures shown in the paper.

### Code structure

- **logical_level_circuit.py**  
  Builds the intermediate (IR) representation of the surface-level circuits used in the manuscript.

- **IR_level_infrastructure.py**  
  Defines the intermediate representation of the logical circuit and its corresponding surface-level circuit, without specifying the physical error rates or the code distance.

- **physical_level_infrastructure.py**  
  Constructs the physical-level quantum circuit given surface-level gates.

- **compiler.py**  
  Receives the IR representation and calls functions from `physical_level_infrastructure.py` to construct the physical circuit with correct time alignment for each surface-level timestamp.

- **factorization_circuit_simulations.py**  
  Runs the full simulations.  
  The code distance and physical error rate can be modified here.

- **analyze_circuit.py**  
  Contains analysis utilities.  
  The `analyze` function runs the Monte-Carlo simulations. The parameters `max_shots` and `max_errors` can be reduced to speed up simulations.  
  Additional functions generate the data summarized in Table 2 (via `get_resources`).  
  The function `create_crumble` converts a selected circuit into a Crumble HTML visualization.

- **plot_results.py**  
  Plots simulation results.  
  Changing `file_path` (line 10) allows plotting different result files.

- **decoding_task_plots.py**  
  Generates the plots shown in Figures 6c and 7.  
  Outputs are saved in the `task_simulations` folder.

- **circuit_error_estimation.py**, **non_FT.py**, **d3_block.py**  
  Generate the error-estimation plots shown in Figure 4.

### Folders

- **results/**  
  Stores simulation outputs.  
  For each simulation, both a `.pkl` file (raw data) and a `.png` file (plot) are saved.

- **circuits/**  
  Contains the circuit definitions used in the manuscript.

- **task_simulations/**  
  Stores decoding-task plots generated by `decoding_task_plots.py`.

### Typical workflow

1. Define or modify logical circuits in `logical_level_circuit.py`.
2. Compile the IR to physical circuits using `compiler.py`.
3. Run simulations via `factorization_circuit_simulations.py`.
4. Analyze results with `analyze_circuit.py`.
5. Generate figures using `plot_results.py` or `decoding_task_plots.py`.






